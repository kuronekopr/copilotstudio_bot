# 05_Security_and_Risk_Acceptance

## SD-01: Append-Only ロギング

**決定**：イベントログは append-only（INSERT のみ、UPDATE/DELETE 禁止）

**理由**：
- 監査証拠の改竄防止
- コンプライアンス要件（SOC 2）
- インサイダー脅威検出

**実装**：DB トリガーで UPDATE/DELETE を禁止

---

## SD-02: SVG ファイル拒否

**決定**：SVG 形式のファイルアップロードを強制的に拒否

**理由**：
- SVG は XML → XML Entity 攻撃可能
- SVG 内にスクリプト埋め込み可能
- リスク vs 利点：利点なし

---

## SD-03: 5MB ファイルサイズ制限

**決定**：1 画像あたり最大 5MB、全体 25MB

**理由**：
- DoS 攻撃対策（リソース枯渇）
- ネットワーク効率
- OCR API のコスト制御

---

## SD-04: 匿名利用の受容

**決定**：認証なしで匿名利用を許可

**リスク**：
- ユーザー追跡不可
- 悪用ユーザーのブロック困難

**対策**：
- Rate limiting（IP + session 単位）
- セッション有効期限（24 時間）
- 異常検知（IP 地理的跳躍等）

